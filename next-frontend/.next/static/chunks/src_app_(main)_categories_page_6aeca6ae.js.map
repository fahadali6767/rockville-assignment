{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Rockville-test/next-frontend/src/app/%28main%29/categories/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nexport default function CategoriesPage() {\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [editingCategory, setEditingCategory] = useState(null); // New state for editing category\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\"); // New state for new category name\r\n\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_API_BASE_URL}/categories`\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        setCategories(data);\r\n      } catch (e) {\r\n        setError(e.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  const handleEditClick = (category) => {\r\n    setEditingCategory(category._id);\r\n    setNewCategoryName(category.categoryName);\r\n  };\r\n\r\n  const handleUpdateCategory = async (categoryId) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        throw new Error(\"Authentication token not found. Please log in.\");\r\n      }\r\n\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_BASE_URL}/categories/update/${categoryId}`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify({ categoryName: newCategoryName }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || \"Failed to update category\");\r\n      }\r\n\r\n      alert(\"Category updated successfully!\");\r\n      setEditingCategory(null); // Exit edit mode\r\n      setNewCategoryName(\"\");\r\n      // Refresh categories after update\r\n      const updatedResponse = await fetch(\r\n        `${process.env.NEXT_PUBLIC_API_BASE_URL}/categories`\r\n      );\r\n      const updatedData = await updatedResponse.json();\r\n      setCategories(updatedData);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      alert(`Error updating category: ${err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading categories...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div>Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-4\">Categories</h2>\r\n      {categories.length > 0 ? (\r\n        <ul>\r\n          {categories.map((category) => (\r\n            <li\r\n              key={category._id}\r\n              className=\"mb-2 p-2 border rounded-md flex justify-between items-center\"\r\n            >\r\n              {editingCategory === category._id ? (\r\n                <div className=\"flex-grow flex items-center\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newCategoryName}\r\n                    onChange={(e) => setNewCategoryName(e.target.value)}\r\n                    className=\"border rounded-md px-2 py-1 flex-grow mr-2\"\r\n                  />\r\n                  <button\r\n                    onClick={() => handleUpdateCategory(category._id)}\r\n                    className=\"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setEditingCategory(null)}\r\n                    className=\"ml-2 bg-gray-300 text-gray-800 px-3 py-1 rounded-md hover:bg-gray-400\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <span>{category.categoryName}</span>\r\n                  <button\r\n                    onClick={() => handleEditClick(category)}\r\n                    className=\"bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600\"\r\n                  >\r\n                    Edit\r\n                  </button>\r\n                </>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>No categories found.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}